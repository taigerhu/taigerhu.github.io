<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>UFS FFU 实践 | TJ的技术博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">UFS FFU 实践</h1><a id="logo" href="/.">TJ的技术博客</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 首页</i></a><a href="/archives/"><i class="fa undefined"> 归档</i></a><a href="/about/"><i class="fa undefined"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">UFS FFU 实践</h1><div class="post-meta">2020-09-04</div><div class="post-content"><p>前文提到ufs-utils这个工具可以做UFS FFU，我们先看这个工具的使用。</p>
<h2 id="ufs-util"><a href="#ufs-util" class="headerlink" title="ufs-util"></a>ufs-util</h2><p>Android自带的aarch64貌似编译有问题，换个工具编译ok，ffu怎么用了？</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./ufs-utils ffu --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"> FFU <span class="built_in">command</span> usage:</span><br><span class="line"></span><br><span class="line">        ufs-utils ffu [-t] &lt;ffu cmd idn&gt; [-p] &lt;path to device&gt;?</span><br><span class="line"></span><br><span class="line">        -t       FFU cmd idn</span><br><span class="line">                         0  : FFU, flash FFU</span><br><span class="line">                         1  : Check FFU status (check FFU status attribute and display FW version)</span><br><span class="line"></span><br><span class="line">        -s       Max chunk size <span class="keyword">in</span> KB alignment to 4KB, <span class="built_in">which</span> FFU file will be <span class="built_in">split</span> (optional)</span><br><span class="line"></span><br><span class="line">        -w       path to FFU file</span><br><span class="line"></span><br><span class="line">        -g       sg struct ver - 0: SG_IO_VER4 (default), 1: SG_IO_VER3</span><br><span class="line"></span><br><span class="line">        -p       bsg device path <span class="keyword">for</span> FFU, ufs-bsg <span class="keyword">for</span> Check FFU status</span><br></pre></td></tr></table></figure>

<p><code>-p</code>的bsg device path就是前面提到的&#x2F;dev&#x2F;0:0:0:0(sg v4) or &#x2F;dev&#x2F;block&#x2F;sda(sg v3)。</p>
<p>usf-bsg用于Check FFU status，device是&#x2F;dev&#x2F;ufs-bsg。</p>
<p>what is ufs bsg? 看文档：</p>
<blockquote>
<ol start="4">
<li><h1 id="BSG-Support"><a href="#BSG-Support" class="headerlink" title="BSG Support"></a>BSG Support</h1></li>
</ol>
<p>This transport driver supports exchanging UFS protocol information units<br>(UPIUs) with a UFS device. Typically, user space will allocate<br>struct ufs_bsg_request and struct ufs_bsg_reply (see ufs_bsg.h) as<br>request_upiu and reply_upiu respectively.  Filling those UPIUs should<br>be done in accordance with JEDEC spec UFS2.1 paragraph 10.7.<br><em>Caveat emptor</em>: The driver makes no further input validations and sends the<br>UPIU to the device as it is.  Open the bsg device in &#x2F;dev&#x2F;ufs-bsg and<br>send SG_IO with the applicable sg_io_v4::</p>
<pre><code>   io_hdr_v4.guard = &#39;Q&#39;;
   io_hdr_v4.protocol = BSG_PROTOCOL_SCSI;
   io_hdr_v4.subprotocol = BSG_SUB_PROTOCOL_SCSI_TRANSPORT;
   io_hdr_v4.response = (__u64)reply_upiu;
   io_hdr_v4.max_response_len = reply_len;
   io_hdr_v4.request_len = request_len;
   io_hdr_v4.request = (__u64)request_upiu;
   if (dir == SG_DXFER_TO_DEV) &#123;
           io_hdr_v4.dout_xfer_len = (uint32_t)byte_cnt;
           io_hdr_v4.dout_xferp = (uintptr_t)(__u64)buff;
   &#125; else &#123;
           io_hdr_v4.din_xfer_len = (uint32_t)byte_cnt;
           io_hdr_v4.din_xferp = (uintptr_t)(__u64)buff;
   &#125;
</code></pre>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">config SCSI_UFS_BSG</span><br><span class="line">        bool &quot;Universal Flash Storage BSG device node&quot;</span><br><span class="line">        depends on SCSI_UFSHCD</span><br><span class="line">        select BLK_DEV_BSGLIB</span><br><span class="line">        help</span><br><span class="line">          Universal Flash Storage (UFS) is SCSI transport specification for</span><br><span class="line">          accessing flash storage on digital cameras, mobile phones and</span><br><span class="line">          consumer electronic devices.</span><br><span class="line">          A UFS controller communicates with a UFS device by exchanging</span><br><span class="line">          UFS Protocol Information Units (UPIUs).</span><br><span class="line">          UPIUs can not only be used as a transport layer for the SCSI protocol</span><br><span class="line">          but are also used by the UFS native command set.</span><br><span class="line">          This transport driver supports exchanging UFS protocol information units</span><br><span class="line">          with a UFS device. See also the ufshcd driver, which is a SCSI driver</span><br><span class="line">          that supports UFS devices.</span><br><span class="line"></span><br><span class="line">          Select this if you need a bsg device node for your UFS controller.</span><br><span class="line">          If unsure, say N.</span><br></pre></td></tr></table></figure>

<p>重点是<code>UPIUs are also used by the UFS native command set</code>。</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">ufshcd-core-<span class="variable">$(CONFIG_SCSI_UFS_BSG)</span>   += ufs_bsg.o</span><br></pre></td></tr></table></figure>

<p>code是<code>driver\scsi\ufs\ufs_bsg.c</code>。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * bsg endpoint that supports UPIUs</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2018 Western Digital Corporation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ufs_bsg.h&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>当前QCOM低内核还不支持ufs bsg，我从5.x port过来可以用了，有些接口小冲突需要fix。</p>
<p>不过drv有对应属性是:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">UFS_ATTRIBUTE(ffu_status, _FFU_STATUS);</span><br></pre></td></tr></table></figure>

<p>sysfs在：</p>
<blockquote>
<p>What:           &#x2F;sys&#x2F;bus&#x2F;platform&#x2F;drivers&#x2F;ufshcd&#x2F;*&#x2F;attributes&#x2F;ffu_status<br>Date:           February 2018<br>Contact:        Stanislav Nijnikov <a href="mailto:&#115;&#x74;&#x61;&#110;&#x69;&#115;&#108;&#97;&#x76;&#x2e;&#x6e;&#x69;&#106;&#110;&#105;&#107;&#x6f;&#x76;&#64;&#119;&#x64;&#99;&#x2e;&#x63;&#111;&#x6d;">&#115;&#x74;&#x61;&#110;&#x69;&#115;&#108;&#97;&#x76;&#x2e;&#x6e;&#x69;&#106;&#110;&#105;&#107;&#x6f;&#x76;&#64;&#119;&#x64;&#99;&#x2e;&#x63;&#111;&#x6d;</a><br>Description:    This file provides the ffu status UFS device attribute.<br>                The full information about the attribute could be found at<br>                UFS specifications 2.1.<br>                The file is read only.</p>
</blockquote>
<p>ufs spec的定义：</p>
<p><img src="http://tjtech.me/usr/uploads/2020/09/857586476.png" alt="ffu-status.png"></p>
<blockquote>
<p>The column “MDV” (Manufacturer Default Value) specifies atrribute values after device manufacturing</p>
</blockquote>
<p>就是出厂值是0了，升级成功是1。</p>
<p>ok，QCOM平台直接使用如下命令升级(固件升级文件是xxx.bin)：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./ufs-utils ffu -t 0 -w xxx.bin -p /dev/block/sda</span><br></pre></td></tr></table></figure>

<p>nm，报错了，一下心哇凉哇凉的:</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">Start : write_buffer mode 14 , buf_id 0</span><br><span class="line">Start : send_scsi_cmd cmd = 3b len 262144 sg_type 0</span><br><span class="line"></span><br><span class="line">writing file scsi_cmd_cdb_1.bin length=10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Err: Command fail with status 1 , senseKey Miscompare</span><br><span class="line"></span><br><span class="line"> Err: SG_IO WRITE BUFFER data error ret -22</span><br><span class="line"></span><br><span class="line"> Err: Write error -22:</span><br></pre></td></tr></table></figure>

<p>工具默认没开debug，打开即可:</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">-<span class="comment">#CXXFLAGS = -DDEBUG</span></span><br><span class="line">+CXXFLAGS = -DDEBUG</span><br></pre></td></tr></table></figure>

<p><code>senseKey Miscompare</code>是啥意思？我们先看工具code：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* description of the sense key values */</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">char</span> *<span class="type">const</span> snstext[] = &#123;</span><br><span class="line">        <span class="string">&quot;No Sense&quot;</span>,         <span class="comment">/* 0: There is no sense information */</span></span><br><span class="line">        <span class="string">&quot;Recovered Error&quot;</span>,  <span class="comment">/* 1: The last command completed successfully</span></span><br><span class="line"><span class="comment">                                  but used error correction */</span></span><br><span class="line">        <span class="string">&quot;Not Ready&quot;</span>,        <span class="comment">/* 2: The addressed target is not ready */</span></span><br><span class="line">        <span class="string">&quot;Medium Error&quot;</span>,     <span class="comment">/* 3: Data error detected on the medium */</span></span><br><span class="line">        <span class="string">&quot;Hardware Error&quot;</span>,   <span class="comment">/* 4: Controller or device failure */</span></span><br><span class="line">        <span class="string">&quot;Illegal Request&quot;</span>,  <span class="comment">/* 5: Error in request */</span></span><br><span class="line">        <span class="string">&quot;Unit Attention&quot;</span>,   <span class="comment">/* 6: Removable medium was changed, or</span></span><br><span class="line"><span class="comment">                                  the target has been reset, or ... */</span></span><br><span class="line">        <span class="string">&quot;Data Protect&quot;</span>,     <span class="comment">/* 7: Access to the data is blocked */</span></span><br><span class="line">        <span class="string">&quot;Blank Check&quot;</span>,      <span class="comment">/* 8: Reached unexpected written or unwritten</span></span><br><span class="line"><span class="comment">                                  region of the medium */</span></span><br><span class="line">        <span class="string">&quot;Vendor Specific&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Copy Aborted&quot;</span>,     <span class="comment">/* A: COPY or COMPARE was aborted */</span></span><br><span class="line">        <span class="string">&quot;Aborted Command&quot;</span>,  <span class="comment">/* B: The target aborted the command */</span></span><br><span class="line">        <span class="string">&quot;Equal&quot;</span>,            <span class="comment">/* C: A SEARCH DATA command found data equal */</span></span><br><span class="line">        <span class="string">&quot;Volume Overflow&quot;</span>,  <span class="comment">/* D: Medium full with still data to be written */</span></span><br><span class="line">        <span class="string">&quot;Miscompare&quot;</span>,       <span class="comment">/* E: Source data and data on the medium</span></span><br><span class="line"><span class="comment">                                  do not agree */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * send_scsi_cmd - Utility function for SCSI command sending</span></span><br><span class="line"><span class="comment"> * @fd: bsg driver file descriptor</span></span><br><span class="line"><span class="comment"> * @cdb: pointer to SCSI cmd cdb buffer</span></span><br><span class="line"><span class="comment"> * @buf: pointer to the SCSI cmd data buffer</span></span><br><span class="line"><span class="comment"> * @cmd_len: SCSI command length</span></span><br><span class="line"><span class="comment"> * @byte_cnt: SCSI data length</span></span><br><span class="line"><span class="comment"> * @dir: The cmd direction</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> <span class="title function_">send_scsi_cmd</span><span class="params">(<span class="type">int</span> fd, <span class="type">const</span> __u8 *cdb, <span class="type">void</span> *buf, __u8 cmd_len,</span></span><br><span class="line"><span class="params">                __u32 byte_cnt, <span class="type">int</span> dir, __u8 sg_type)</span></span><br><span class="line">&#123;</span><br><span class="line">	...</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">                io_hdr_v3.interface_id = <span class="string">&#x27;S&#x27;</span>;</span><br><span class="line">                io_hdr_v3.cmd_len = cmd_len;</span><br><span class="line">                io_hdr_v3.mx_sb_len = SENSE_BUFF_LEN;</span><br><span class="line">                io_hdr_v3.dxfer_direction = dir;</span><br><span class="line">                io_hdr_v3.dxfer_len = byte_cnt;</span><br><span class="line">                io_hdr_v3.dxferp = buf;</span><br><span class="line">                <span class="comment">/* pointer to command buf (rbufCmdBlk) */</span></span><br><span class="line">                io_hdr_v3.cmdp = (<span class="type">unsigned</span> <span class="type">char</span> *)cdb;</span><br><span class="line">                io_hdr_v3.sbp = sense_buffer; <span class="comment">//tj: here</span></span><br><span class="line">                io_hdr_v3.timeout = DEF_TIMEOUT_MSEC;</span><br><span class="line">                sg_struct = &amp;io_hdr_v3;</span><br><span class="line">        &#125;</span><br><span class="line">        WRITE_LOG(<span class="string">&quot;Start : %s cmd = %x len %d sg_type %d\n&quot;</span>, __func__, cdb[<span class="number">0</span>],</span><br><span class="line">                        byte_cnt, sg_type);</span><br><span class="line"></span><br><span class="line">        write_file_with_counter(<span class="string">&quot;scsi_cmd_cdb_%d.bin&quot;</span>,</span><br><span class="line">                        cdb, cmd_len);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (((ret = ioctl(fd, SG_IO, sg_struct)) &lt; <span class="number">0</span>) &amp;&amp;</span><br><span class="line">                ((errno == EINTR) || (errno == EAGAIN)));</span><br><span class="line">        <span class="keyword">if</span> (sg_type == SG4_TYPE) &#123;</span><br><span class="line">                <span class="keyword">if</span> (io_hdr_v4.info != <span class="number">0</span>) &#123;</span><br><span class="line">                        print_error(<span class="string">&quot;Command fail with status %x , senseKey %s&quot;</span>,</span><br><span class="line">                                io_hdr_v4.info,</span><br><span class="line">                                sense_key_string(sense_buffer[<span class="number">2</span>]));</span><br><span class="line">                        ret = -EINVAL;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (io_hdr_v3.status) &#123;</span><br><span class="line">                        print_error(<span class="string">&quot;Command fail with status %x , senseKey %s&quot;</span>,</span><br><span class="line">                                io_hdr_v3.status,</span><br><span class="line">                                sense_key_string(sense_buffer[<span class="number">2</span>]));</span><br><span class="line">                        ret = -EINVAL;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>用的是v3，<code>io_hdr_v3.status</code>是1，ioctl cmd是<code>SG_IO</code>。</p>
<p>看下v3 interface:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * SCSI Generic v3 struct copied from include/scsi/sg.h</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">sg_io_hdr</span> &#123;</span></span><br><span class="line">        <span class="type">int</span> interface_id;           <span class="comment">/* [i] &#x27;S&#x27; for SCSI generic (required) */</span></span><br><span class="line">        <span class="type">int</span> dxfer_direction;        <span class="comment">/* [i] data transfer direction  */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> cmd_len;      <span class="comment">/* [i] SCSI command length ( &lt;= 16 bytes) */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> mx_sb_len;    <span class="comment">/* [i] max length to write to sbp */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">short</span> <span class="type">int</span> iovec_count; <span class="comment">/* [i] 0 implies no scatter gather */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> dxfer_len;     <span class="comment">/* [i] byte count of data transfer */</span></span><br><span class="line">        <span class="type">void</span> *dxferp;              <span class="comment">/* [i], [*io] points to data transfer memory</span></span><br><span class="line"><span class="comment">                                 or scatter gather list */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> *cmdp;       <span class="comment">/* [i], [*i] points to command to perform */</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> *sbp;        <span class="comment">/* [i], [*o] points to sense_buffer memory */</span> <span class="comment">//tj:here</span></span><br></pre></td></tr></table></figure>

<p><code>sbp</code>就是响应了，看样子是写进去了，怎么会不匹配，拍了拍脑袋想了想改了改代码居然可以了，容我慢慢道来:)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">FFU was written to the device, reboot and check status</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>版权声明：</span>本站所有文章均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0 CN</a> 许可协议。转载请注明原文链接！</p></div><br><div class="tags"><a href="/tags/ffu"><i class="fa fa-tag">ffu</i></a></div><div class="post-nav"><a class="pre" href="/understand-dsu-in-android10.html">了解Android 10 DSU</a><a class="next" href="/scsi-generic-overview.html">SCSI generic(sg) overview</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/linux-kernel-drm-overview.html">Linux kernel DRM overview</a></li><li class="post-list-item"><a class="post-list-link" href="/upgrade-my-custom-build-server-amd-based.html">我的PC组装升级记</a></li><li class="post-list-item"><a class="post-list-link" href="/convert-typecho-to-hexo.html">I am back!</a></li><li class="post-list-item"><a class="post-list-link" href="/review-freezing-issue-when-drag-icon-after-ohos-adaption.html">OpenHarmony适配后图标拖拽卡屏问题回顾</a></li><li class="post-list-item"><a class="post-list-link" href="/how-to-fix-parse-too-complex-in-source-insight.html">Source Insight 自定义解析</a></li><li class="post-list-item"><a class="post-list-link" href="/adapt-ohos-for-mali-g57-on-sprd-t606.html">转：拥抱鸿蒙 - 在展讯T606平台上的探索与实践</a></li><li class="post-list-item"><a class="post-list-link" href="/essential-inventory-of-adaption-for-unisoc-platform-androidt-based.html">展讯平台 OpenHarmony 3.2.2 适配基础盘点</a></li><li class="post-list-item"><a class="post-list-link" href="/porting-openharmony-linux-kernel-to-3rd-party-chip.html">快速移植 OpenHarmony Linux 内核到三方 ARM64 平台</a></li><li class="post-list-item"><a class="post-list-link" href="/openharmony-linux-kernel-overview.html">初识 OpenHarmony Linux Kernel</a></li><li class="post-list-item"><a class="post-list-link" href="/what-android-gki-brings-to-oems.html">What Android GKI Brings to OEMs</a></li></ul></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/arm/">arm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/dd/">dd</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ebpf/">ebpf</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/fs/">fs</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iot/">iot</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mm/">mm</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/msm/">msm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ohos/">ohos</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/perf/">perf</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/stab/">stab</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">20</span></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">TJ的技术博客.</a></div></div></div><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>